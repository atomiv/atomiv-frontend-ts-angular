<!-- â‚¬ -->


<div class="container mt-5">
  
  <div *ngIf="isLoadingResults">
    <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
  </div>
  <div>
    <!-- back -->
    <a mat-button color="primary" class="mb-5" [routerLink]="['/orders']"><mat-icon>arrow_back_ios</mat-icon>Back</a>
  </div>

  <!-- --------------------------------- -->
  <!-- --------------------------------- -->
  <!-- -------------------------------- -->
  <!-- --------------------------------- -->
  <!-- <div *ngIf="order">
    <table mat-table [dataSource]="dataSource">

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>Id</th>
        <td mat-cell *matCellDef="let order">{{ order.id }}</td>
      </ng-container>

      <ng-container matColumnDef="orderItem">
        <th></th>
        <td></td>
      </ng-container>

      <ng-container></ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

    </table>
  </div> -->
  <!-- --------------------------------- -->
  <!-- -------------------------------- -->

  <!-- TODO !showing -->
  <div fxLayout="column" *ngIf="order">

    <mat-card>

      <mat-card-header>
        <mat-card-title>
          Order No: {{order.id}}
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <mat-list>
          <!-- <mat-list-item>
            <div mat-line>Customer Id:</div>
            <span mat-line>{{order.customerId}}</span>
          </mat-list-item> -->
          <mat-list-item class="mb-3">
            <span *ngFor="let customer of customers">
              <div *ngIf="customer.id === order.customerId">
                Customer: {{ customer.firstName }} {{ customer.lastName }}
              </div>
            </span>
          </mat-list-item>
        </mat-list>
        <!-- --------------------------------------- -->
        {{order.id}}<br/>
        {{order.customerId}}<br/>
        <!-- -------------------------------------- -->
        <table mat-table [dataSource]="dataSource">
          <!-- <ng-container *ngFor="let orderItem of order.orderItems"> -->
            <!-- <td>{{ orderItem.id }}</td> -->

            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef>Order No</th>
              <td mat-cell *matCellDef="let row">{{ row.id }}</td>
            </ng-container>

            <ng-container matColumnDef="customerId">
              <th mat-header-cell *matHeaderCellDef>Customer Id</th>
              <td mat-cell *matCellDef="let row">{{ row.customerId }}</td>
            </ng-container>

            <!-- <ng-container matColumnDef="orderItems">
              <th mat-header-cell *matHeaderCellDef>Product Id</th>
              <td mat-cell *matCellDef="let row">{{ row.orderItems.productId }}</td>
            </ng-container> -->

            <ng-container matColumnDef="InnerTable">
              <th mat-header-cell *matHeaderCellDef>Product Id</th>
              <td mat-cell *matCellDef="let row">
                <table>
                  <tr *ngFor="let orderItem of row.orderItems">
                    <td>{{ orderItem.productId }}</td>
                  </tr>
                  <!-- <ng-container *ngFor="let rule of element.rules">
                        {{ rule.date}}, {{rule.rules}}, {{rule.id}}
                  </ng-container> -->
                </table>
              </td>
            </ng-container>
  

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns; "></tr>

        </table>
        <!-- TODO: Order total -->
        <!-- Angular material table footer totals -->
        <!-- angular et total value in column -->
        <!-- -------------------------------------- -->
      </mat-card-content>

      <mat-card-actions>
        <button mat-flat-button color="primary" class="mr-3" [routerLink]="['/orders/edit', order.id]">
          <!-- <mat-icon>edit</mat-icon> -->
          Edit
        </button>
        <button mat-stroked-button color="primary" (click)="deleteOrder(order.id)">
          Delete
        </button>
      </mat-card-actions>
    </mat-card>
  
  </div>

  <div *ngIf="!order">
    No order found
   </div>  
   <br />
   <!-- <a routerLink="/orders">View All Orders</a> -->

</div>



